# Neutron Supermirror Library

Author and email:  
Wenbo Mo  
mwb19@mails.tsinghua.edu.cn  
Huarui Wu    
huarui92@163.com  
Xuewu Wang  
wangxuewu@tsinghua.edu.cn  
Department of Engineering Physics, Tsinghua University  
Key Laboratory of Particle & Radiation Imaging (Tsinghua University), Ministry of Education  
Beijing 100084, China  

------------------------------------------------------
## Update log  

### Version 1
2019.03.27  
version1.0.0  
* Add basic reflectivity calculation function  

### Version 2
2019.03.31  
version2.0.0  
* Add reflectivity calculation function under the introduction of roughness  

2019.04.03  
version2.1.0  
* Add reflectivity calculation function under absorbing conditions  

2019.04.09  
version2.2.0  
* Add average reflectivity calculation function from 1 to m  

2019.4.10  
version2.3.0  
* Add a function to calculate the height and width of the Bragg peaks generated by n film pairs  

### Version 3
2019.04.10  
version3.0.0  
* Added 7 implementation functions of super-mirror design algorithm  

2019.04.11  
version3.0.1  
* Fix a bug in RSD algorithm function: may be sharply reduced to a negative value near the end of the iteration  

2019.04.11  
version3.1.0  
* Add Improved Mezei algorithm tuning function  

2019.04.12  
version3.2.0  
* Add reflectance curve fitting function  

2019.04.12  
version3.3.0  
* Add parameter optimization series function
* Add SM algorithm tuning function
* Add ABC algorithm tuning function  

2019.04.13  
version3.4.0  
* Add ABC algorithm implementation function (using optimized parameters)
* Add EAYAO algorithm tuning function  

2019.04.14  
version3.5.0  
* Add reflectivity curve fitting function 2
* Add IC algorithm tuning function  

2019.04.18  
version3.6.0  
* Add calculation function for average reflectance and fitted m value of film after introducing thickness manufacturing error  

2019.04.19  
version3.6.5  
* Fix bug in the average reflectivity calculation function: when the input m value is very close to 1, the denominator is 0
* Add a function to calculate the average reflectance of the full m range  

2019.04.23  
version3.7.0  
* The function of calculating the average reflectance and fitting m value of the film after introducing the thickness manufacturing error is improved, and the comparison of the error-free situation is added  

2019.04.25  
version3.8.0  
* Add reflectance curve general fit function (suitable for introducing roughness)  

2019.4.30  
version3.8.1  
* Expand the reflectance curve fitting area, the maximum fit m value can reach 10  

### Version 4
2019.04.30  
version4.0.0  
* Optimize for large mirrors with large m-value and super multi-membrane pairs
* Finding the problem: Based on the matrix method, the reflectivity calculation function is not suitable for calculating the reflectivity of a super-mirror with a film pair of more than 1300 layers, and there will be a problem of matrix calculation overflow.
* A new quantum mechanics iteratively calculates the reflectivity calculation function of the reflection coefficient (referred to as the recursive method). The original reflectivity calculation function is called the matrix method.
* A new reflectivity calculation function based on the recursive method is introduced.
* A new reflectivity calculation function based on the recursive method is introduced, and the reflectivity calculation function under the condition that the roughness is constant is considered.
* A new reflectivity calculation function based on the recursive method is introduced, and the reflectivity calculation function under the condition of roughness layer by layer growth is considered.
* Modifying the reflectivity calculation function based on the matrix method used in the reflectance curve fitting function to be based on the recursive method
* The matrix method-based reflectance calculation function used in the function of calculating the height and width of the Bragg peak generated by the n film pairs is modified to be based on a recursive method  

2019.05.04  
version4.1.0  
删除反射率曲线通用拟合函数RefFitGen(x0,y)（因为其并不适用于引入粗糙度的情形）  
新增常数反射率曲线拟合函数  
新增粗糙度逐层增长的反射率曲线拟合函数  
以上两个拟合函数还在测试中，数据可以拟合上，但是拟合参数尚不能反映粗糙度水平的物理意义  
2019.05.07  
version4.2.0  
新增标定膜层厚度的精度函数  
2019.05.29  
version4.3.0  
新增粗糙度优化的GRB算法实现函数  
新增引入绝对厚度制造误差后的膜对平均反射率、拟合m值的计算函数  
2019.06.17  
version4.5.0  
新增可以设计满足任意形状反射率曲线的超镜的RSD算法实现函数  
2019.09.04  
version4.5.1  
对函数包中的注释文字进行完善  
2019.09.04  
version4.6.0  
修复version4.0。0中发现的基于矩阵方法反射率计算函数在计算膜对数目超过1300层的超镜的反射率时，会出现矩阵元素值溢出的问题  
每一对膜对迭代前，对矩阵元素进行归一化，防止膜层数目过多时矩阵元素数值过大溢出  
2019.09.05  
version4.7.0  
新增基于矩阵方法的各类粗糙度条件下的反射率计算函数  
将第一大类反射率计算函数分为1.1基于矩阵方法和1.2基于量子力学方法的两个小类  
两种方法方法的反射率计算函数的计算结果是一致的，  
基于量子力学方法的计算函数在基于矩阵方法的计算函数名称后加了一个“2”以示区分，  
使用函数时同名函数可以任意选择，输入参数和输出数据都相同  
