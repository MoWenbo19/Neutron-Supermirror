# Neutron Supermirror Library

Author and email:  
Wenbo Mo  
mwb19@mails.tsinghua.edu.cn  
Huarui Wu    
huarui92@163.com  
Xuewu Wang  
wangxuewu@tsinghua.edu.cn  
Department of Engineering Physics, Tsinghua University  
Key Laboratory of Particle & Radiation Imaging (Tsinghua University), Ministry of Education  
Beijing 100084, China  

------------------------------------------------------
## Update log  

### Version 1
2019.03.27  
version1.0.0  
* Add basic reflectivity calculation function  

### Version 2
2019.03.31  
version2.0.0  
* Add reflectivity calculation function under the introduction of roughness  

2019.04.03  
version2.1.0  
* Add reflectivity calculation function under absorbing conditions  

2019.04.09  
version2.2.0  
* Add average reflectivity calculation function from 1 to m  

2019.4.10  
version2.3.0  
* Add a function to calculate the height and width of the Bragg peaks generated by n film pairs  

### Version 3
2019.04.10  
version3.0.0  
* Added 7 implementation functions of super-mirror design algorithm  

2019.04.11  
version3.0.1  
* Fix a bug in RSD algorithm function: may be sharply reduced to a negative value near the end of the iteration  

2019.04.11  
version3.1.0  
* Add Improved Mezei algorithm tuning function  

2019.04.12  
version3.2.0  
* Add reflectance curve fitting function  

2019.04.12  
version3.3.0  
* Add parameter optimization series function
* Add SM algorithm tuning function
* Add ABC algorithm tuning function  

2019.04.13  
version3.4.0  
* Add ABC algorithm implementation function (using optimized parameters)
* Add EAYAO algorithm tuning function  

2019.04.14  
version3.5.0  
* Add reflectivity curve fitting function 2
* Add IC algorithm tuning function  

2019.04.18  
version3.6.0  
* Add calculation function for average reflectance and fitted m value of film after introducing thickness manufacturing error  

2019.04.19  
version3.6.5  
* Fix bug in the average reflectivity calculation function: when the input m value is very close to 1, the denominator is 0
* Add a function to calculate the average reflectance of the full m range  

2019.04.23  
version3.7.0  
* The function of calculating the average reflectance and fitting m value of the film after introducing the thickness manufacturing error is improved, and the comparison of the error-free situation is added  

2019.04.25  
version3.8.0  
* Add reflectance curve general fit function (suitable for introducing roughness)  

2019.4.30  
version3.8.1  
* Expand the reflectance curve fitting area, the maximum fit m value can reach 10  

### Version 4
2019.04.30  
version4.0.0  
* Optimize for large mirrors with large m-value and super multi-membrane pairs
* Finding the problem: Based on the matrix method, the reflectivity calculation function is not suitable for calculating the reflectivity of a super-mirror with a film pair of more than 1300 layers, and there will be a problem of matrix calculation overflow
* A new quantum mechanics iteratively calculates the reflectivity calculation function of the reflection coefficient (referred to as the recursive method). The original reflectivity calculation function is called the matrix method
* A new reflectivity calculation function based on the recursive method is introduced
* A new reflectivity calculation function based on the recursive method is introduced, and the reflectivity calculation function under the condition that the roughness is constant is considered
* A new reflectivity calculation function based on the recursive method is introduced, and the reflectivity calculation function under the condition of roughness layer by layer growth is considered
* Modifying the reflectivity calculation function based on the matrix method used in the reflectance curve fitting function to be based on the recursive method
* The matrix method-based reflectance calculation function used in the function of calculating the height and width of the Bragg peak generated by the n film pairs is modified to be based on a recursive method  

2019.05.04  
version4.1.0  
* Remove the reflectance curve general fit function RefFitGen(x0,y) (because it is not suitable for introducing roughness)
* Add constant reflectance curve fitting function
* New roughness curve-by-layer growth reflectance curve fitting function
* The above two fitting functions are still in the test, the data can be fitted, but the fitting parameters still do not reflect the physical meaning of the roughness level  

2019.05.07  
version4.2.0  
* Add precision function to calibrate film thickness  

2019.05.29  
version4.3.0  
* Add roughness optimization GRB algorithm implementation function
* Add calculation function for average reflectance and fitted m value of film after introducing absolute thickness manufacturing error  

2019.06.17  
version4.5.0  
* Add RSD algorithm implementation function to design super-mirror that satisfies any shape reflectance curve  

2019.09.04  
version4.5.1  
* Improve the comment text in the function package  

2019.09.04  
version4.6.0  
* Fix the matrix-based reflectance calculation function found in version 4.0.0. When calculating the reflectivity of a super-mirror with a film pair number exceeding 1300, the problem of matrix element value overflow occurs.
* Before each pair of film pairs is iterated, the matrix elements are normalized to prevent excessive matrix element values from overflowing when the number of layers is too large.  

2019.09.05  
version4.7.0  
* Add reflectivity calculation function under various roughness conditions based on matrix method
* The first large-scale reflectivity calculation function is divided into 1.1 based on the matrix method and 1.2 based on the quantum mechanics method.
* The calculation results of the reflectivity calculation function of the two methods are consistent.
* The calculation function based on the quantum mechanical method adds a "2" to the name of the calculation function based on the matrix method to distinguish it.
* The function with the same name can be arbitrarily selected when using the function, and the input parameters and output data are the same.  
