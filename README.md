# Neutron Supermirror Library
[中文说明](https://github.com/MoWenbo19/Neutron-Supermirror/wiki/Neutron-Supermirror-Library%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E)

Author and email:  
Wenbo Mo  
mwb19@mails.tsinghua.edu.cn  
Huarui Wu    
huarui92@163.com  
Xuewu Wang  
wangxuewu@tsinghua.edu.cn  
Department of Engineering Physics, Tsinghua University  
Key Laboratory of Particle & Radiation Imaging (Tsinghua University), Ministry of Education  
Beijing 100084, China  

------------------------------------------------------
## Update log  

### Version 1
2019.03.27  
version1.0.0  
* Add basic reflectivity calculation function  

### Version 2
2019.03.31  
version2.0.0  
* Add reflectivity calculation function under the introduction of film roughness  

2019.04.03  
version2.1.0  
* Add reflectivity calculation function under the absorbing condition  

2019.04.09  
version2.2.0  
* Add average reflectivity calculation function from 1 to m  

2019.4.10  
version2.3.0  
* Add a function to calculate the height and width of the Bragg peaks generated by n film pairs  

### Version 3
2019.04.10  
version3.0.0  
* Added functions to implement the design prosess of 7 algorithms of supermirror   

2019.04.11  
version3.0.1  
* Fix a bug in the function for RSD algorithm: the film thickness may be sharply reduced to a negative value near the end of the iteration  

2019.04.11  
version3.1.0  
* Add the tuning function for Improved Mezei algorithm   

2019.04.12  
version3.2.0  
* Add reflectivity curve fitting function  

2019.04.12  
version3.3.0  
* Add a series of function for parameter optimization 
* Add SM algorithm tuning function
* Add ABC algorithm tuning function  

2019.04.13  
version3.4.0  
* Add ABC algorithm implementation function (using optimized parameters)
* Add EAYAO algorithm tuning function  

2019.04.14  
version3.5.0  
* Add reflectivity curve fitting function 2
* Add IC algorithm tuning function  

2019.04.18  
version3.6.0  
* Add calculation function for average reflectivity and fitted m value of the multilayer after introducing thickness manufacturing error  

2019.04.19  
version3.6.5  
* Fix a bug in the average reflectivity calculation function: when the input m value is very close to 1, the denominator become 0
* Add a function to calculate the average reflectivity of the full m range  

2019.04.23  
version3.7.0  
* Improve the function of calculating the average reflectivity and fitted m value of the multilayer after introducing the thickness manufacturing error, and add the comparison of the error-free situation 

2019.04.25  
version3.8.0  
* Add general reflectivity curve fit function (suitable for introducing film roughness)  

2019.4.30  
version3.8.1  
* Expand the reflectivity curve fitting area, so that the maximum fitted m value can reach 10  

### Version 4
2019.04.30  
version4.0.0  
* Optimize for the supermirror with large m-value and so many bilayers
* Find a problem: Based on the matrix method, the reflectivity calculation function is not suitable for calculating the reflectivity of a supermirror with a bilayers of more than 1300, as there will be a problem of matrix calculation overflow
* Add quantum mechanics iteratively calculates the reflectivity calculation function of the reflection coefficient (referred to as the recursive method). The original reflectivity calculation function is called the matrix method
* Add reflectivity calculation function under the absorbing condition based on the recursive method
* Add reflectivity calculation function based on the recursive method, and absorption and constant roughness is considered
* Add reflectivity calculation function based on the recursive method, and absorption and increasing roughness is considered
* Modify the reflectivity calculation function based on the matrix method used in the reflectivity curve fitting function to be based on the recursive method
* The matrix method-based reflectivity calculation function used in the function of calculating the height and width of the Bragg peak generated by the n bilayers is modified to be based on a recursive method  

2019.05.04  
version4.1.0  
* Remove the general reflectance curve fit function RefFitGen(x0,y) (As it is not suitable for the condition of film roughness)
* Add constant reflectivity curve fitting function
* Add reflectivity curve fitting function for the condition of increasing roughness 
* The above two fitting functions are still in test. The data can be fitted so far, but the fitting parameters do not reflect the physical meaning of the roughness level  

2019.05.07  
version4.2.0  
* Add a precision function to calibrate film thickness  

2019.05.29  
version4.3.0  
* Add GRB algorithm implementation function with roughness optimization 
* Add calculation function for average reflectivity and fitted m value of film after introducing absolute thickness manufacturing error  

2019.06.17  
version4.5.0  
* Add RSD algorithm implementation function to design a supermirror that can satisfy any shape reflectivity curve  

2019.09.04  
version4.5.1  
* Improve the comment text in this library  

2019.09.04  
version4.6.0  
* Fix  the problem of the matrix-based reflectivity calculation function founded in version 4.0.0
* Before each bilayer is iterated, the matrix elements are normalized to prevent excessive matrix element values from overflowing when the number of layers is too large. 

2019.09.05  
version4.7.0  
* Add reflectivity calculation function under various roughness conditions based on matrix method
* The first large-scale reflectivity calculation function is divided into 1.1 functions based on the matrix method and 1.2 functions based on the quantum mechanics method
* The calculation results of the reflectivity calculation function of these two kinds of methods are consistent
* The calculation function based on the quantum mechanical method adds a "2" after their names to distinguish it and the calculation function based on the matrix method
* The function with the same name can be arbitrarily selected, and the input parameters and output data are the same  
